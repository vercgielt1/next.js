---
title: Setting up Playwright with Next.js
nav_title: Playwright
description: Learn how to set up Playwright with Next.js for End-to-End (E2E) testing.
---

[Playwright](https://playwright.dev/) is a testing framework that lets you automate Chromium, Firefox, and WebKit with a single API. You can use it to write **End-to-End (E2E)** testing and **Component Testing**. This guide will show you how to set up Playwright with Next.js and write your first tests.

## Quickstart

The fastest way to get started is to use `create-next-app` with the [with-playwright example](https://github.com/vercel/next.js/tree/canary/examples/with-playwright). This will create a Next.js project complete with Playwright configured.

```bash filename="Terminal"
npx create-next-app@latest --example with-playwright with-playwright-app
```

## Manual setup

To install Playwright, run the following command:

```bash filename="Terminal"
npm init playwright@latest
# or
yarn create playwright
# or
pnpm create playwright
```

This will take you through a series of prompts to setup and configure Playwright for your project, including adding a `playwright.config.ts` file. Please refer to the [Playwright installation guide](https://playwright.dev/docs/intro#installation) for the step-by-step guide.

## Creating your first Playwright E2E test

Create two new Next.js pages:

<AppOnly>

```tsx filename="app/page.tsx"
import Link from 'next/link'

export default function Page() {
  return (
    <div>
      <h1>Home</h1>
      <Link href="/about">About</Link>
    </div>
  )
}
```

```tsx filename="app/about/page.tsx"
import Link from 'next/link'

export default function Page() {
  return (
    <div>
      <h1>About</h1>
      <Link href="/">Home</Link>
    </div>
  )
}
```

</AppOnly>

<PagesOnly>

```tsx filename="pages/index.tsx"
import Link from 'next/link'

export default function Home() {
  return (
    <div>
      <h1>Home</h1>
      <Link href="/about">About</Link>
    </div>
  )
}
```

```tsx filename="pages/about.tsx"
import Link from 'next/link'

export default function About() {
  return (
    <div>
      <h1>About</h1>
      <Link href="/">Home</Link>
    </div>
  )
}
```

</PagesOnly>

Then, add a test to verify that your navigation is working correctly:

```ts filename="tests/example.spec.ts"
import { test, expect } from '@playwright/test'

test('navigate to the about page', async ({ page }) => {
  // Start from the index page (the baseURL is set via the webServer in the playwright.config.ts)
  await page.goto('http://localhost:3000/')
  // Find an element with the text 'About' and click on it
  await page.getByText('About').click()
  // The new URL should be "/about" (baseURL is used there)
  await expect(page).toHaveURL('http://localhost:3000/about')
  // The new page should contain an h1 with "About"
  await expect(page.getByRole('heading', { level: 1 })).toContainText('About')
})
```

> **Good to know**:
>
> You can use `page.goto("/")` instead of `page.goto("http://localhost:3000/")`, if you add [`"baseURL": "http://localhost:3000"`](https://playwright.dev/docs/api/class-testoptions#test-options-base-url) to the `playwright.config.ts` [configuration file](https://playwright.dev/docs/test-configuration).

### Running your Playwright tests

Playwright will simulate a user navigating your application using three browsers: Chromium, Firefox and Webkit, this requires your Next.js server to be running. We recommend running your tests against your production code to more closely resemble how your application will behave.

Run `npm run build` and `npm run start`, then run `npx playwright test` in another terminal window to run the Playwright tests.

> **Good to know**: Alternatively, you can use the [`webServer`](https://playwright.dev/docs/test-webserver/) feature to let Playwright start the development server and wait until it's fully available.

## Creating your first Playwright component test

Component tests build and mount a specific component without having to bundle your whole application or start a server.

To install Playwright component testing, run the following command:

```bash filename="Terminal"
npm init playwright@latest -- --ct
# or
yarn create playwright --ct
# or
pnpm create playwright --ct
```

Select **React** as your front-end framework. A `playwright` folder will be created in your project, and a `playwright-ct.config.ts` file to enable component testing.

Assuming the same components from the previous section, add a test to validate a component is rendering the expected output:

<AppOnly>

```tsx filename="app/page.test.tsx"
import { test, expect } from '@playwright/experimental-ct-react'
import HomePage from './page'

test('display expected content', async ({ mount }) => {
  // Mount the home page React component
  const component = await mount(<HomePage />)

  // The home page should have an h1 with "Home"
  await expect(component.getByRole('heading', { level: 1 })).toHaveText('Home')

  // Validate that a link with the expected URL is present
  // Following the link is better suited to an E2E test
  await expect(component.getByRole('link', { name: 'About' })).toHaveAttribute('href', '/about')
})
```

</AppOnly>

<PagesOnly>

```jsx filename="pages/index.test.tsx"
import HomePage from './index'

test('display expected content', async ({ mount }) => {
  // Mount the home page React component
  const component = await mount(<HomePage />)

  // The home page should have an h1 with "Home"
  await expect(component.getByRole('heading', { level: 1 })).toHaveText('Home')

  // Validate that a link with the expected URL is present
  // *Following* the link is better suited to an E2E test
  await expect(component.getByRole('link', { name: 'About' })).toHaveAttribute('href', '/about')
})
```

</PagesOnly>

> **Warning:**
> - Playwright component testing is experimental.
> - Playwright currently doesn't support component testing for `async` Server Components.
> - Since component tests do not require a Next.js server, features like `<Image />` that rely on a server being available may not function out-of-the-box.

### Running Component Tests

Run `npm run test-ct` in your terminal to start Playwright and run your component testing suite.

## Continuous Integration (CI)

Playwright will by default run your tests in the [headless mode](https://playwright.dev/docs/ci#running-headed). To install all the Playwright dependencies, run `npx playwright install-deps`.

You can learn more about Playwright and Continuous Integration from these resources:

- [Next.js with Playwright example](https://github.com/vercel/next.js/tree/canary/examples/with-playwright)
- [Playwright on your CI provider](https://playwright.dev/docs/ci)
- [Playwright Discord](https://discord.com/invite/playwright-807756831384403968)
